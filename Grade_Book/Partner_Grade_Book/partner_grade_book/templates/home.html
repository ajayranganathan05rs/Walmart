<!doctype html>
<html lang="en">

<head>
    {% load static %}
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Language" content="en">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="icon" sizes="192x192" href="{% static 'images/favicon.ico'%}">
    <title>WFM Dashboard</title>
    <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no" />
    <meta name="description" content="This is an example dashboard created using build-in elements and components.">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="{% static 'css/main.css' %} " rel="stylesheet">
    <style>
        .progress {
            height: 6px;
        }
        .widget-numbers {
            font-size: 22px !important;
        }
    </style>
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-12 col-md-12 col-sm-12" id="header">
                Customer Care L&D 
            </div>
        </div>
        <div class="row">
            <div class="container-fluid" id="navigation">
                <div class="col-sm-12 col-md-12 col-sm-12">
                    <nav class="navbar navbar-expand-lg navbar-light bg-light">
                        <ul class="nav navbar-nav">
                            <li><a class="active" href="home">Home</a></li>
                            <li><a href="quick_attendance">Quick Attendance</a></li>
                            <li><a href="observation">Observations</a></li>
                            <li><a href="system_tracker">System Tracker</a></li>
                            <li><a href="view_roster">View Roster</a></li>
                            <!-- home.html quick_attendance.html observation.html system_cracker.html view_roaster.html-->
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12 col-md-4 col-lg-3">
                <a href="{% static 'download_template/Digital Grade Book Roster V2 Template.xlsx' %}" download><button type="button" class="btn btn-primary" id="Ros_down" style="border-block-color: #3860b2;">Download Roster Template</button></a>
            </div>
            <div class="col-sm-12 col-md-4 col-lg-6">
                <p class="h2" style="text-align: center;"><u>Partner Grade Book</u></p>
                <p class="h3" style="text-align: center;"><i>Daily Tracker</i></p>
            </div>
            <div class="col-sm-12 col-md-4 col-lg-3">
                <button type="button" class="btn btn-primary btn-file float-right" id="uploader" style="border-block-color: #3860b2;">
                Upload Roster
                <input type="file" name="upload_roster" id="uploader_roster">
                </button>
                <br>
                <br>
                <button type="button" class="btn btn-primary float-right" id="refresh" style="border-block-color: #3860b2;">
                Refresh
                </button>
            </div>
        </div>
        <div class="row">
            <div class="table-responsive">
                <table class = "table table-striped">
                    <thead>
                        <tr>
                            <th>Course Start date</th>
                            <th>Course Name</th>
                            <th>Primary Facilitator</th>
                            <th>Secondary Facilitator</th>
                            <th>Quick Attendance</th>
                            <th>Observations</th>
                            <th>System Tracker</th>
                            <th>View Roster</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr >
                            <td>9/2/2022</td>
                            <td>NH:CRT</td>
                            <td>Trania TenEyck</td>
                            <td> </td>
                            <td><a href="quick_attendance" style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="observation" style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="system_tracker"  style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="view_roster" style="font-size: 20px;">&#128462;</a></td>
                        </tr>
                        <tr >
                            <td>8/22/2022</td>
                            <td>NH:Pickup & Online Groceries</td>
                            <td>Fred Hettel</td>
                            <td> </td>
                            <td><a href="quick_attendance" style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="observation" style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="system_tracker"  style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="view_roster" style="font-size: 20px;">&#128462;</a></td>
                        </tr>
                        <tr >
                            <td>8/15/2022</td>
                            <td>NH:Delivery Support Tier 2</td>
                            <td>lavonda Thompson</td>
                            <td>Kiah Brewew</td>
                            <td><a href="quick_attendance" style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="observation" style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="system_tracker"  style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="view_roster" style="font-size: 20px;">&#128462;</a></td>
                        </tr>
                        <tr >
                            <td>8/15/2022</td>
                            <td>NH:Delivery Support Tier @</td>
                            <td>Kelly Newton</td>
                            <td>Kiah Brewew</td>
                            <td><a href="quick_attendance" style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="observation" style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="system_tracker"  style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="view_roster" style="font-size: 20px;">&#128462;</a></td>
                        </tr>
                        <tr >
                            <td>8/15/2022</td>
                            <td>NH:Customer Relations & Private Brands ...</td>
                            <td>Ashley Johnson</td>
                            <td>James Mitchel</td>
                            <td><a href="quick_attendance" style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="observation" style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="system_tracker"  style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="view_roster" style="font-size: 20px;">&#128462;</a></td>
                        </tr>
                        <tr >
                            <td>8/15/2022</td>
                            <td>NH:Payments</td>
                            <td>Tye Brown</td>
                            <td></td>
                            <td><a href="quick_attendance" style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="observation" style="font-size: 20px;">&#128394;</a></td>
                            <td><a href=""  style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="#" style="font-size: 20px;">&#128462;</a></td>
                        </tr>
                        <tr >
                            <td>8/15/2022</td>
                            <td>NH:Payments</td>
                            <td>Natasha Cain</td>
                            <td></td>
                            <td><a href="quick_attendance" style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="observation" style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="system_tracker"  style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="view_roster" style="font-size: 20px;">&#128462;</a></td>
                        </tr>
                        <tr >
                            <td>8/15/2022</td>
                            <td>NH:Customer Relations & Private Brands...</td>
                            <td>Natasha Cain</td>
                            <td>James Mithell</td>
                            <td><a href="quick_attendance" style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="observation" style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="system_tracker"  style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="view_roster" style="font-size: 20px;">&#128462;</a></td>
                        </tr>
                        <tr >
                            <td>8/8/2022</td>
                            <td>NH:Optical</td>
                            <td>Julie Gayler</td>
                            <td>Lynsey Schreder</td>
                            <td><a href="quick_attendance" style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="observation" style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="system_tracker"  style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="view_roster" style="font-size: 20px;">&#128462;</a></td>
                        </tr>
                        <tr >
                            <td>8/1/2022</td>
                            <td>NH:Customer Relations & Private Brands...</td>
                            <td>Debra Hayworth</td>
                            <td>James Mithell</td>
                            <td><a href="quick_attendance" style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="observation" style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="system_tracker"  style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="view_roster" style="font-size: 20px;">&#128462;</a></td>
                        </tr>
                        <tr >
                            <td>7/15/2022</td>
                            <td>CE: Delivery Support Tier 2 Chat</td>
                            <td>Kelly Newton</td>
                            <td></td>
                            <td><a href="quick_attendance" style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="observation" style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="system_tracker"  style="font-size: 20px;">&#128394;</a></td>
                            <td><a href="view_roster" style="font-size: 20px;">&#128462;</a></td>
                        </tr>            
                    </tbody>
                </table>
            <div>
        </div>
    </div>
    <div id="toast">
        <div id="img">Icon</div>
        <div id="desc">A notification message..</div>
    </div>
    <script src="{% static 'scripts/jquery-3.6.0.min.js' %}"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="{% static 'scripts/main.js' %}"></script>
    <script type="text/javascript">
        $("document").ready(function(){
           $('#uploader_roster').change(function(){
                filename=$('#uploader_roster').prop('files')[0]['name'];
                var file = $('#uploader_roster').prop('files')[0];
                var csrf_token = "{{ csrf_token }}";
                var fd = new FormData();
                fd.append('docs',file)
                $.ajax({
                    url : '/upload_roaster/',
                    csrfmiddlewaretoken : csrf_token,
                    type : 'POST',
                    data : fd,
                    contentType: false,
                    processData: false,
                    success: function(data) {
                        data=JSON.parse(data);
                        if (data['columns'] === 'Error')
                        {
                            // img_content='Upload Error';
                            // content=filename+' Uploaded Successfully';
                            content='File Upload Error';;
                            $('#img').html("<i class='fas fa-exclamation-circle' style='font-size:23px;color:red'>");
                            // $('#img').css({'background-color': '#eee'});
                            $('#desc').text(content);
                            var x = document.getElementById("toast");
                            x.className = "show";
                            setTimeout(function(){ x.className = x.className.replace("show", ""); }, 3000);
                        }
                        else{
                            alert(data['columns']);
                            img_content='Upload';
                            // content=filename+' Uploaded Successfully';
                            content='File Uploaded Successfully';
                            $('#img').text(img_content);
                            $('#desc').text(content);
                            var x = document.getElementById("toast")
                            x.className = "show";
                            setTimeout(function(){ x.className = x.className.replace("show", ""); }, 3000);    
                        }
                        
                    },
                    failure: function(data) {
                        img_content='Upload';
                        // content=filename+' Uploaded Successfully';
                        content='Error while uploding '+filename+' file';
                        $('#img').text(img_content);
                        $('#desc').text(content);
                        var x = document.getElementById("toast");
                        x.className = "show";
                        setTimeout(function(){ x.className = x.className.replace("show", ""); }, 3000);
                    }
                });
                
           }); 
        });
    </script>
</body>

</html>